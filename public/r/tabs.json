{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tabs",
  "description": "Accessible tabs with underline and pill variants",
  "dependencies": [
    "gsap@^3.12.0"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "src/molecules/Tabs/Tabs.tsx",
      "content": "import {\n  forwardRef,\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useRef,\n  useEffect,\n  useId,\n  type HTMLAttributes,\n  type ButtonHTMLAttributes,\n  type ReactNode,\n  type KeyboardEvent,\n} from 'react'\nimport { cn } from '../../utils/cn'\nimport { useReducedMotion } from '../../hooks/useReducedMotion'\n\ntype TabsVariant = 'underline' | 'pill'\n\ninterface TabsContextValue {\n  activeValue: string\n  setActiveValue: (value: string) => void\n  variant: TabsVariant\n  baseId: string\n  registerTab: (value: string, element: HTMLButtonElement | null) => void\n  getTabElements: () => Map<string, HTMLButtonElement>\n}\n\nconst TabsContext = createContext<TabsContextValue | null>(null)\n\nfunction useTabsContext() {\n  const context = useContext(TabsContext)\n  if (!context) {\n    throw new Error('Tabs compound components must be used within a <Tabs> parent')\n  }\n  return context\n}\n\n// --- Tabs Root ---\n\nexport interface TabsProps extends Omit<HTMLAttributes<HTMLDivElement>, 'onChange'> {\n  /** The controlled active tab value */\n  value?: string\n  /** Callback when active tab changes */\n  onChange?: (value: string) => void\n  /** The default active tab value for uncontrolled mode */\n  defaultValue?: string\n  /** Visual variant */\n  variant?: TabsVariant\n  children: ReactNode\n}\n\nexport const Tabs = forwardRef<HTMLDivElement, TabsProps>(\n  ({ value, onChange, defaultValue, variant = 'underline', children, className, ...props }, ref) => {\n    const [internalValue, setInternalValue] = useState(defaultValue ?? '')\n    const tabElementsRef = useRef<Map<string, HTMLButtonElement>>(new Map())\n    const baseId = useId()\n\n    const activeValue = value !== undefined ? value : internalValue\n\n    const setActiveValue = useCallback(\n      (newValue: string) => {\n        if (value === undefined) {\n          setInternalValue(newValue)\n        }\n        onChange?.(newValue)\n      },\n      [value, onChange]\n    )\n\n    const registerTab = useCallback((tabValue: string, element: HTMLButtonElement | null) => {\n      if (element) {\n        tabElementsRef.current.set(tabValue, element)\n      } else {\n        tabElementsRef.current.delete(tabValue)\n      }\n    }, [])\n\n    const getTabElements = useCallback(() => tabElementsRef.current, [])\n\n    return (\n      <TabsContext.Provider value={{ activeValue, setActiveValue, variant, baseId, registerTab, getTabElements }}>\n        <div ref={ref} className={cn('flex flex-col', className)} {...props}>\n          {children}\n        </div>\n      </TabsContext.Provider>\n    )\n  }\n)\n\nTabs.displayName = 'Tabs'\n\n// --- TabsList ---\n\nexport interface TabsListProps extends HTMLAttributes<HTMLDivElement> {\n  /** Enable glass morphism background */\n  glass?: boolean\n  children: ReactNode\n}\n\nexport const TabsList = forwardRef<HTMLDivElement, TabsListProps>(\n  ({ glass = false, children, className, ...props }, ref) => {\n    const { variant, activeValue, getTabElements } = useTabsContext()\n    const listRef = useRef<HTMLDivElement>(null)\n    const indicatorRef = useRef<HTMLDivElement>(null)\n    const prefersReducedMotion = useReducedMotion()\n\n    // Merge forwarded ref with internal ref\n    const mergedRef = useCallback(\n      (node: HTMLDivElement | null) => {\n        (listRef as React.MutableRefObject<HTMLDivElement | null>).current = node\n        if (typeof ref === 'function') ref(node)\n        else if (ref) (ref as React.MutableRefObject<HTMLDivElement | null>).current = node\n      },\n      [ref]\n    )\n\n    // Animate indicator position\n    useEffect(() => {\n      const indicator = indicatorRef.current\n      const list = listRef.current\n      if (!indicator || !list) return\n\n      const tabs = getTabElements()\n      const activeTab = tabs.get(activeValue)\n      if (!activeTab) {\n        indicator.style.opacity = '0'\n        return\n      }\n\n      const listRect = list.getBoundingClientRect()\n      const tabRect = activeTab.getBoundingClientRect()\n\n      const left = tabRect.left - listRect.left\n      const width = tabRect.width\n\n      indicator.style.opacity = '1'\n      indicator.style.transform = `translateX(${left}px)`\n      indicator.style.width = `${width}px`\n\n      if (variant === 'pill') {\n        indicator.style.height = `${tabRect.height}px`\n      }\n    }, [activeValue, variant, getTabElements])\n\n    const isUnderline = variant === 'underline'\n    const isPill = variant === 'pill'\n\n    return (\n      <div\n        ref={mergedRef}\n        role=\"tablist\"\n        className={cn(\n          'relative flex items-center gap-1',\n          isUnderline && 'border-b border-[var(--glass-border)]',\n          isPill && [\n            'p-1 rounded-full',\n            'bg-[var(--glass-bg)]',\n            'border border-[var(--glass-border)]',\n          ],\n          glass && 'backdrop-blur-lg',\n          className\n        )}\n        {...props}\n      >\n        {/* Animated indicator */}\n        <div\n          ref={indicatorRef}\n          aria-hidden\n          className={cn(\n            'absolute left-0',\n            prefersReducedMotion\n              ? 'transition-none'\n              : 'transition-[transform,width,opacity] duration-200 ease-out',\n            isUnderline && [\n              'bottom-0 h-[2px]',\n              'bg-[var(--color-white)]',\n            ],\n            isPill && [\n              'top-1 rounded-full',\n              'bg-[var(--color-white)]',\n            ],\n          )}\n          style={{ opacity: 0, width: 0 }}\n        />\n        {children}\n      </div>\n    )\n  }\n)\n\nTabsList.displayName = 'TabsList'\n\n// --- TabsTab ---\n\nexport interface TabsTabProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  /** Unique value identifying this tab */\n  value: string\n  children: ReactNode\n}\n\nexport const TabsTab = forwardRef<HTMLButtonElement, TabsTabProps>(\n  ({ value, children, className, onKeyDown, ...props }, ref) => {\n    const { activeValue, setActiveValue, variant, baseId, registerTab, getTabElements } = useTabsContext()\n    const internalRef = useRef<HTMLButtonElement | null>(null)\n    const isActive = activeValue === value\n\n    const mergedRef = useCallback(\n      (node: HTMLButtonElement | null) => {\n        internalRef.current = node\n        registerTab(value, node)\n        if (typeof ref === 'function') ref(node)\n        else if (ref) (ref as React.MutableRefObject<HTMLButtonElement | null>).current = node\n      },\n      [ref, registerTab, value]\n    )\n\n    const handleKeyDown = useCallback(\n      (e: KeyboardEvent<HTMLButtonElement>) => {\n        onKeyDown?.(e)\n        if (e.defaultPrevented) return\n\n        const tabs = getTabElements()\n        const tabValues = Array.from(tabs.keys())\n        const currentIndex = tabValues.indexOf(value)\n\n        let targetIndex: number\n\n        switch (e.key) {\n          case 'ArrowRight':\n            targetIndex = (currentIndex + 1) % tabValues.length\n            break\n          case 'ArrowLeft':\n            targetIndex = (currentIndex - 1 + tabValues.length) % tabValues.length\n            break\n          case 'Home':\n            targetIndex = 0\n            break\n          case 'End':\n            targetIndex = tabValues.length - 1\n            break\n          default:\n            return\n        }\n\n        e.preventDefault()\n        const targetValue = tabValues[targetIndex]\n        const targetElement = tabs.get(targetValue)\n        if (targetElement) {\n          targetElement.focus()\n          setActiveValue(targetValue)\n        }\n      },\n      [onKeyDown, getTabElements, value, setActiveValue]\n    )\n\n    const isUnderline = variant === 'underline'\n    const isPill = variant === 'pill'\n\n    return (\n      <button\n        ref={mergedRef}\n        role=\"tab\"\n        type=\"button\"\n        id={`${baseId}-tab-${value}`}\n        aria-selected={isActive}\n        aria-controls={`${baseId}-panel-${value}`}\n        tabIndex={isActive ? 0 : -1}\n        onClick={() => setActiveValue(value)}\n        onKeyDown={handleKeyDown}\n        className={cn(\n          'relative z-10',\n          'inline-flex items-center justify-center',\n          'text-sm font-medium',\n          'focus-ring',\n          'transition-colors duration-200 ease-out',\n          'cursor-pointer',\n          'whitespace-nowrap',\n          isUnderline && [\n            'px-3 py-2',\n            isActive\n              ? 'text-[var(--color-white)]'\n              : 'text-[var(--color-grey-400)] hover:text-[var(--color-white)]',\n          ],\n          isPill && [\n            'px-3 py-1.5',\n            'rounded-full',\n            isActive\n              ? 'text-[var(--color-bg)]'\n              : 'text-[var(--color-grey-400)] hover:text-[var(--color-white)]',\n          ],\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </button>\n    )\n  }\n)\n\nTabsTab.displayName = 'TabsTab'\n\n// --- TabsPanel ---\n\nexport interface TabsPanelProps extends HTMLAttributes<HTMLDivElement> {\n  /** The tab value this panel corresponds to */\n  value: string\n  children: ReactNode\n}\n\nexport const TabsPanel = forwardRef<HTMLDivElement, TabsPanelProps>(\n  ({ value, children, className, ...props }, ref) => {\n    const { activeValue, baseId } = useTabsContext()\n    const isActive = activeValue === value\n\n    if (!isActive) return null\n\n    return (\n      <div\n        ref={ref}\n        role=\"tabpanel\"\n        id={`${baseId}-panel-${value}`}\n        aria-labelledby={`${baseId}-tab-${value}`}\n        tabIndex={0}\n        className={cn('mt-2 focus-ring', className)}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\n\nTabsPanel.displayName = 'TabsPanel'\n",
      "type": "registry:ui"
    },
    {
      "path": "src/hooks/useReducedMotion.ts",
      "content": "import { useState, useEffect, useCallback, useMemo } from 'react'\n\n/**\n * Hook to detect user's motion preference with SSR safety\n * Returns true if user prefers reduced motion\n *\n * Note: For animations, consider using this to:\n * - Disable or reduce animation duration\n * - Use fade instead of transform animations\n * - Skip parallax and auto-playing animations\n */\nexport function useReducedMotion(): boolean {\n  const getInitialState = useCallback(() => {\n    if (typeof window === 'undefined') {\n      // Default to reduced motion for SSR (safer, more accessible)\n      return true\n    }\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches\n  }, [])\n\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(getInitialState)\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return\n    }\n\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)')\n\n    // Update on mount for SSR hydration\n    setPrefersReducedMotion(mediaQuery.matches)\n\n    const handleChange = (event: MediaQueryListEvent) => {\n      setPrefersReducedMotion(event.matches)\n    }\n\n    mediaQuery.addEventListener('change', handleChange)\n    return () => mediaQuery.removeEventListener('change', handleChange)\n  }, [])\n\n  return prefersReducedMotion\n}\n\n/**\n * Returns animation configuration based on reduced motion preference\n * Provides sensible defaults that can be spread into animation props\n */\nexport function useMotionConfig() {\n  const prefersReducedMotion = useReducedMotion()\n\n  return useMemo(\n    () => ({\n      /** Whether reduced motion is preferred */\n      isReduced: prefersReducedMotion,\n\n      /** Suggested animation duration in ms */\n      duration: prefersReducedMotion ? 0 : 300,\n\n      /** Suggested animation duration as CSS value */\n      durationCss: prefersReducedMotion ? '0ms' : '300ms',\n\n      /** Suggested easing function */\n      easing: prefersReducedMotion ? 'linear' : 'cubic-bezier(0.4, 0, 0.2, 1)',\n\n      /** Whether to disable transform animations */\n      disableTransform: prefersReducedMotion,\n\n      /** Whether to disable parallax effects */\n      disableParallax: prefersReducedMotion,\n\n      /** Whether to disable auto-playing animations */\n      disableAutoPlay: prefersReducedMotion,\n\n      /** Suggested transition config for Framer Motion / GSAP */\n      transition: prefersReducedMotion\n        ? { duration: 0 }\n        : { duration: 0.3, ease: [0.4, 0, 0.2, 1] },\n    }),\n    [prefersReducedMotion]\n  )\n}\n\n/**\n * Returns true if user prefers high contrast\n */\nexport function usePrefersHighContrast(): boolean {\n  const getInitialState = useCallback(() => {\n    if (typeof window === 'undefined') {\n      return false\n    }\n    return window.matchMedia('(prefers-contrast: high)').matches\n  }, [])\n\n  const [prefersHighContrast, setPrefersHighContrast] = useState(getInitialState)\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return\n    }\n\n    const mediaQuery = window.matchMedia('(prefers-contrast: high)')\n    setPrefersHighContrast(mediaQuery.matches)\n\n    const handleChange = (event: MediaQueryListEvent) => {\n      setPrefersHighContrast(event.matches)\n    }\n\n    mediaQuery.addEventListener('change', handleChange)\n    return () => mediaQuery.removeEventListener('change', handleChange)\n  }, [])\n\n  return prefersHighContrast\n}\n",
      "type": "registry:hook"
    }
  ],
  "type": "registry:ui"
}